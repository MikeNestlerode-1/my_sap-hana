parameters:
  osList:
  - key: "SLES12"
    value: "{
        \"offer\": \"SLES-SAP\", 
        \"publisher\": \"SUSE\", 
        \"sku\": \"12-sp2\"
      }"
  - key: "RHEL7"
    value: "{
        \"offer\": \"SLES-SAP\", 
        \"publisher\": \"SUSE\", 
        \"sku\": \"12-sp2\"
      }"

${{ each os in parameters.osList }}:
  - job: createAllNew${{os.key}}
    variables:
      scenario: v2-allNew
      testcase: $(scenario)-$(Build.BuildId)
    steps:
    - script: 'echo ${{os.value}}'
    - template: update-place-holder.yaml
      parameters:
        scenario: $(scenario)
        testCaseName: $(testcase)
        placeHolder: var-rg-name
        value: $(testcase)
    - template: terraform-deployment-steps.yaml
      parameters:
        testCaseName: $(testcase)
    - template: ansible-deployment-steps.yaml
      parameters:
        testCaseName: $(testcase)
    displayName: 'job ${{p}}'
